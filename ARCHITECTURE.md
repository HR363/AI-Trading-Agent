# ğŸ“Š System Architecture

## High-Level Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TELEGRAM TRADING COMMUNITY                    â”‚
â”‚  "I entered BTCUSDT long at 45000, SL 44500, TP 46000, 47000"  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   TELEGRAM MONITOR      â”‚
                    â”‚  (telegram_monitor.py)  â”‚
                    â”‚  - Connects to channel  â”‚
                    â”‚  - Receives messages    â”‚
                    â”‚  - Filters non-trading  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    SIGNAL PARSER        â”‚
                    â”‚  (signal_parser.py)     â”‚
                    â”‚  - Uses GPT-4/3.5       â”‚
                    â”‚  - Extracts data        â”‚
                    â”‚  - Assigns confidence   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   TRADING SIGNAL        â”‚
                    â”‚     (models.py)         â”‚
                    â”‚  - Type: ENTRY          â”‚
                    â”‚  - Symbol: BTCUSDT      â”‚
                    â”‚  - Side: BUY            â”‚
                    â”‚  - Entry: 45000         â”‚
                    â”‚  - SL: 44500            â”‚
                    â”‚  - Confidence: 95%      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  POSITION MANAGER       â”‚
                    â”‚ (position_manager.py)   â”‚
                    â”‚  - Validates signal     â”‚
                    â”‚  - Checks risk limits   â”‚
                    â”‚  - Calculates size      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚    Risk Checks:             â”‚
                  â”‚  âœ“ Max positions (5)        â”‚
                  â”‚  âœ“ Daily loss limit (5%)    â”‚
                  â”‚  âœ“ Position size (2-5%)     â”‚
                  â”‚  âœ“ Confidence (â‰¥70%)        â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   BROKER INTERFACE      â”‚
                    â”‚ (broker_interface.py)   â”‚
                    â”‚  - Alpaca or Binance    â”‚
                    â”‚  - Executes trade       â”‚
                    â”‚  - Returns result       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â–¼                                         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  ALPACA API     â”‚                    â”‚  BINANCE API    â”‚
   â”‚  (Stocks)       â”‚                    â”‚  (Crypto)       â”‚
   â”‚  - Market order â”‚                    â”‚  - Market order â”‚
   â”‚  - Stop-loss    â”‚                    â”‚  - Limit order  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                                      â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   POSITION CREATED      â”‚
                    â”‚     (models.py)         â”‚
                    â”‚  - Tracked in memory    â”‚
                    â”‚  - Updates on partials  â”‚
                    â”‚  - Closes on signal     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   LOGGING & MONITORING  â”‚
                    â”‚  - Console output       â”‚
                    â”‚  - Log files            â”‚
                    â”‚  - Dashboard updates    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        MAIN.PY                             â”‚
â”‚  Entry point, orchestrates all components                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼                  â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CONFIG  â”‚    â”‚   TELEGRAM   â”‚  â”‚ SIGNAL â”‚   â”‚ BROKER   â”‚
â”‚         â”‚    â”‚   MONITOR    â”‚  â”‚ PARSER â”‚   â”‚INTERFACE â”‚
â”‚ .env    â”‚â—„â”€â”€â”€â”¤              â”‚â—„â”€â”¤        â”‚â—„â”€â”€â”¤          â”‚
â”‚ config  â”‚    â”‚ - Telethon   â”‚  â”‚ OpenAI â”‚   â”‚ Alpaca   â”‚
â”‚  .py    â”‚    â”‚ - Events     â”‚  â”‚  API   â”‚   â”‚ Binance  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   POSITION    â”‚
              â”‚   MANAGER     â”‚
              â”‚               â”‚
              â”‚ - Risk rules  â”‚
              â”‚ - Execution   â”‚
              â”‚ - Tracking    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

```
Message Text
    â”‚
    â”œâ”€â–º Quick Filter (keywords) â”€â”€â”€â”€â”€â–º âŒ Not trading â†’ Skip
    â”‚
    â””â”€â–º AI Parser (OpenAI)
            â”‚
            â”œâ”€â–º Confidence < 50% â”€â”€â”€â”€â–º âš ï¸ Low confidence â†’ Skip
            â”‚
            â””â”€â–º Signal Created
                    â”‚
                    â”œâ”€â–º Type: ENTRY
                    â”‚       â”‚
                    â”‚       â”œâ”€â–º Check: Valid entry? â”€â”€â”€â”€â–º âŒ No â†’ Skip
                    â”‚       â”œâ”€â–º Check: Confidence â‰¥70%? â–º âŒ No â†’ Skip
                    â”‚       â”œâ”€â–º Check: Max positions? â”€â”€â–º âŒ Yes â†’ Skip
                    â”‚       â”œâ”€â–º Check: Daily loss? â”€â”€â”€â”€â–º âŒ Yes â†’ Skip
                    â”‚       â”‚
                    â”‚       â””â”€â–º âœ… Execute Trade
                    â”‚               â”‚
                    â”‚               â”œâ”€â–º Calculate size (2%)
                    â”‚               â”œâ”€â–º Send to broker
                    â”‚               â””â”€â–º Create position
                    â”‚
                    â”œâ”€â–º Type: PARTIAL
                    â”‚       â”‚
                    â”‚       â”œâ”€â–º Find position
                    â”‚       â””â”€â–º Close percentage
                    â”‚
                    â”œâ”€â–º Type: STOP_LOSS_MOVE
                    â”‚       â”‚
                    â”‚       â”œâ”€â–º Find position
                    â”‚       â””â”€â–º Update stop-loss
                    â”‚
                    â””â”€â–º Type: CLOSE
                            â”‚
                            â”œâ”€â–º Find position
                            â””â”€â–º Close 100%
```

## Class Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MODELS                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚TradingSignal â”‚      â”‚   Position   â”‚     â”‚   Trade    â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚ Execution  â”‚ â”‚
â”‚  â”‚- type        â”‚      â”‚- id          â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚- symbol      â”‚      â”‚- symbol      â”‚     â”‚- success   â”‚ â”‚
â”‚  â”‚- side        â”‚  â”Œâ”€â”€â–ºâ”‚- side        â”‚â—„â”€â”€â”€â”€â”¤- position  â”‚ â”‚
â”‚  â”‚- entry_price â”‚  â”‚   â”‚- entry_price â”‚     â”‚- error     â”‚ â”‚
â”‚  â”‚- stop_loss   â”‚  â”‚   â”‚- quantity    â”‚     â”‚- timestamp â”‚ â”‚
â”‚  â”‚- confidence  â”‚  â”‚   â”‚- stop_loss   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚- pnl         â”‚                    â”‚
â”‚         â”‚          â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚          â”‚
          â”‚          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              POSITION MANAGER                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     â”‚                                       â”‚
â”‚  execute_signal()   â”‚    Dictionary of active positions:   â”‚
â”‚         â”‚           â”‚    {                                  â”‚
â”‚         â”œâ”€entry â”€â”€â”€â”€â”´â”€â”€â”€â–º  "pos_1": Position(...)          â”‚
â”‚         â”œâ”€partial         "pos_2": Position(...)          â”‚
â”‚         â”œâ”€sl_move         "pos_3": Position(...)          â”‚
â”‚         â””â”€close       }                                     â”‚
â”‚                                                             â”‚
â”‚  Risk Management:                                           â”‚
â”‚  - can_open_position()                                      â”‚
â”‚  - check daily_pnl                                          â”‚
â”‚  - validate limits                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              BROKER INTERFACE (ABC)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Abstract methods:                                          â”‚
â”‚  - get_account_balance()                                    â”‚
â”‚  - get_current_price(symbol)                                â”‚
â”‚  - execute_trade(signal, size)                              â”‚
â”‚  - close_position(position, %)                              â”‚
â”‚  - update_stop_loss(position, price)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                      â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  AlpacaBroker     â”‚  â”‚ BinanceBroker   â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚- Alpaca REST API  â”‚  â”‚- Binance Client â”‚
     â”‚- Stock trading    â”‚  â”‚- Crypto trading â”‚
     â”‚- Paper & Live     â”‚  â”‚- Testnet & Live â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## State Management

```
Application State
â”œâ”€â”€â”€ Config (loaded from .env)
â”œâ”€â”€â”€ Telegram Client (persistent session)
â”œâ”€â”€â”€ Position Manager
â”‚    â”œâ”€â”€â”€ Active Positions Map
â”‚    â”‚    â””â”€â”€â”€ Position objects (in memory)
â”‚    â”œâ”€â”€â”€ Daily PnL
â”‚    â””â”€â”€â”€ Risk Limits
â””â”€â”€â”€ Broker Connection (API client)

Position Lifecycle:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PENDING  â”‚â”€â”€â”€â”€â–ºâ”‚ OPEN â”‚â”€â”€â”€â”€â–ºâ”‚ CLOSED â”‚â”€â”€â”€â”€â–ºâ”‚ REMOVED â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”¬â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â””â”€â–º PARTIAL (reduces quantity)
```

## File Organization

```
TRADING-AGENT/
â”‚
â”œâ”€â”€ Core Application
â”‚   â”œâ”€â”€ main.py                  # Entry point
â”‚   â”œâ”€â”€ config.py                # Configuration
â”‚   â”œâ”€â”€ models.py                # Data structures
â”‚   â”œâ”€â”€ signal_parser.py         # AI parsing
â”‚   â”œâ”€â”€ broker_interface.py      # Broker APIs
â”‚   â”œâ”€â”€ position_manager.py      # Risk & execution
â”‚   â””â”€â”€ telegram_monitor.py      # Telegram listener
â”‚
â”œâ”€â”€ Utilities
â”‚   â”œâ”€â”€ test_parser.py           # Test AI parsing
â”‚   â”œâ”€â”€ dry_run.py               # Monitor only
â”‚   â”œâ”€â”€ dashboard.py             # View portfolio
â”‚   â””â”€â”€ launcher.bat             # Windows launcher
â”‚
â”œâ”€â”€ Configuration
â”‚   â”œâ”€â”€ .env.example             # Template
â”‚   â”œâ”€â”€ .env                     # Your config (create)
â”‚   â”œâ”€â”€ .gitignore               # Git exclusions
â”‚   â””â”€â”€ requirements.txt         # Dependencies
â”‚
â”œâ”€â”€ Documentation
â”‚   â”œâ”€â”€ README.md                # Overview
â”‚   â”œâ”€â”€ QUICKSTART.md            # Fast setup
â”‚   â”œâ”€â”€ setup.md                 # Detailed setup
â”‚   â”œâ”€â”€ TROUBLESHOOTING.md       # Problem solving
â”‚   â”œâ”€â”€ PROJECT_OVERVIEW.md      # This file
â”‚   â””â”€â”€ ARCHITECTURE.md          # Architecture docs
â”‚
â””â”€â”€ Runtime
    â”œâ”€â”€ logs/                    # Log files
    â””â”€â”€ *.session                # Telegram session
```

## Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SECURITY LAYERS                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 1: Credential Protection
â”œâ”€â”€â”€ .env file (not in git)
â”œâ”€â”€â”€ Environment variables
â””â”€â”€â”€ No hardcoded secrets

Layer 2: API Security
â”œâ”€â”€â”€ HTTPS connections only
â”œâ”€â”€â”€ API key authentication
â”œâ”€â”€â”€ Optional IP whitelisting (broker)
â””â”€â”€â”€ 2FA on accounts (recommended)

Layer 3: Risk Management
â”œâ”€â”€â”€ Position size limits (2-5%)
â”œâ”€â”€â”€ Max open positions (5)
â”œâ”€â”€â”€ Daily loss limits (5%)
â””â”€â”€â”€ Confidence thresholds (70%)

Layer 4: Paper Trading First
â”œâ”€â”€â”€ Test with virtual money
â”œâ”€â”€â”€ Validate strategy
â””â”€â”€â”€ Build confidence

Layer 5: Monitoring
â”œâ”€â”€â”€ Comprehensive logging
â”œâ”€â”€â”€ Real-time alerts
â””â”€â”€â”€ Portfolio tracking
```

## Async Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Event Loop (asyncio)                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ Telegram Event Handler                   â”‚        â”‚
â”‚  â”‚  @client.on(NewMessage)                  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚             â”‚                                          â”‚
â”‚             â”‚ async/await                              â”‚
â”‚             â–¼                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚  â”‚ Parse Message   â”‚ â—„â”€â”€â”€â”€â”€â–º OpenAI API               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚           â”‚                                            â”‚
â”‚           â–¼                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚  â”‚ Execute Trade   â”‚ â—„â”€â”€â”€â”€â”€â–º Broker API               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚           â”‚                                            â”‚
â”‚           â–¼                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚  â”‚ Update Position â”‚                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                        â”‚
â”‚  All operations non-blocking!                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

This architecture ensures:
- âœ… Scalability (async operations)
- âœ… Modularity (swappable components)
- âœ… Security (layered protection)
- âœ… Reliability (error handling)
- âœ… Maintainability (clean separation)
